# Loads default set of integrations. Do not remove.
default_config:

frontend:
  themes: !include_dir_merge_named themes

automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml

# === SCANNER ===
input_text:
  scanner_input:
    name: "Scanner Input"
    max: 128
    initial: ""
  scanner_buffer:  # ← ZUSAMMENGEFASST!
    name: "Scanner Buffer"
    max: 128
    initial: ""

input_boolean:
  scan_trigger:
    name: "Scan Now"
    initial: false

# Grocy REST
rest_command:
  grocy_lookup:
    url: "http://a0d7b954-grocy:80/api/stock/products/by-barcode/{{ barcode }}"
    method: GET
    headers:
      'Content-Type': 'application/json'
      'GROCY-API-KEY': 'API_KEY_Einfügen'

# Lovelace dashboards configuration added by AI Agent
lovelace:
  dashboards:
    radio-player-this-device:
      mode: yaml
      title: Radioplayer (Gerätebasiert)
      icon: mdi:radio
      show_in_sidebar: true
      filename: ui-lovelace-radio-player-this-device.yaml
      
sensor:
  - platform: template
    sensors:
      current_time_badge:
        friendly_name: "Aktuelle Zeit"
        value_template: "{{ now().strftime('%H:%M:%S') }}"
        device_class: timestamp

mqtt:
  switch:
    - name: "Tuya Sirene Schalter"
      unique_id: "tuya_sirene_switch"
      command_topic: "zigbee2mqtt/Tuya Sirene/set"
      payload_on: '{"warning": {"mode": "burglar"}}'
      payload_off: '{"warning": {"mode": "stop"}}'
      qos: 1
      retain: false

shell_command:
  export_entities: 'curl -s -X GET "http://homeassistant.local:8123/api/states" -H "Authorization: Bearer Token einfügen " | jq ".[] | {entity_id: .entity_id, friendly_name: .attributes.friendly_name, state: .state, attributes: .attributes, device_info: .attributes.device_info}" > /config/www/esphome_entities.json'
